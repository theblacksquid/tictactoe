(function(){var t,n,e,r,o,i,s,l,u,c,a,h,p,f,d,m,w,v,g,y,b,T,_,k,A;d=function(t){return t[0]},m=function(t){return t[1]},k=function(t,n){switch(!1){case m(t)-m(n)!==0:return"VERTICAL";case d(t)-d(n)!==0:return"HORIZONTAL";default:return(m(t)-m(n))/(d(t)-d(n))}},w=function(t,n,e){var r,o,i,s,l,u;switch(l=t.length,r=[],o=e,!1){case"HORIZONTAL"!==n:return t[e];case"VERTICAL"!==n:for(i=0,s=t.length;i<s;i++)u=t[i],r.push(u[e]);return r;case"DIAGONAL"!==n:for(;l>o;)r.push(t[o][o]),o++;return r;case"ANTI-DIAG"!==n:for(;l>o;)r.push(t[o][l-1-o]),o++;return r}},b=function(t){var n;for(n=0;t.length>n;){if(t[n]!==t[0])return!1;n++}return!0},a=function(t){return[].concat.apply([],t)},v=function(t,n){return b(t)?t.length:t.filter(function(t){if(t===n)return!0}).length},T=function(t,n){var e,r,o,i,s,l,u,c,a;for(l=[],c=0,r=0,i=t.length;r<i;r++){for(u=t[r],a=0,o=0,s=u.length;o<s;o++)e=u[o],e===n?(l.push([c,a]),a++):a++;c++}return l},f=function(t,n){return Math.floor(Math.random()*(n-t+1))+t},_=function(t){var n,e,r,o,i,s,l,u,c;for(u=d(t),c=m(t),e=[[-1,0],[-1,-1],[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1]],l=[],i=0,s=e.length;i<s;i++)n=e[i],r=d(n),o=m(n),l.push([u+r,c+o]);return l},u=function(t,n){var e,r,o,i,s,l,u,c,a;for(s=0;n.length>s;){for(i=w(n,"HORIZONTAL",s),a=w(n,"VERTICAL",s),o=w(n,"DIAGONAL",0),e=w(n,"ANTI-DIAG",0),r=[i,a,o,e],u=0,c=r.length;u<c;u++)if(l=r[u],b(l)===!0&&l[0]===t)return!0;s++}return!1},c=function(t,n,e){var r,o;return o=a(t).filter(function(t){if("unclaimed"!==t)return!0}),r=a(t).length,u(n,t)?n+" wins":u(e,t)?e+" wins":o.length===r?"DRAW":"CONTINUE"},p=function(t){var n,e,r,o,i,s,l,u,c,a;for(c=t.rows,a=[],r=0,i=c.length;r<i;r++){for(u=c[r],n=[],l=u.cells,o=0,s=l.length;o<s;o++)e=l[o],n.push(e.status);a.push(n)}return a},h={},h.state=[],h.turns=1,h.over=function(t){var n,e,r,o,i,s,l,u;for(s=t.rows,e=0,o=s.length;e<o;e++)for(u=s[e],l=u.cells,r=0,i=l.length;r<i;r++)n=l[r],$("#cell-"+n.row+"-"+n.col+"-img").off();return h.turns=1},h.players={human:"",ai:""},h.obj={},h.main=function(t,n){var r,o,l,u,a,f,d,m,w,v;for(o=new e(t,n),o.render(),h.state=p(o),l="CONTINUE",m=o.rows,u=0,f=m.length;u<f;u++)for(v=m[u],w=v.cells,a=0,d=w.length;a<d;a++)r=w[a],$("#cell-"+r.row+"-"+r.col+"-img").click(function(){var t,n;return h.state=p(o),n=c(h.state,"X","O"),"CONTINUE"!==n&&(h.over(o),$("#status").html("Tic Tac Toe | "+n),t=new i("#leftmenu"),t.render()),s.respond(o)});return h.state=p(o),s.respond(o)},y="icons/ic_block_black_24dp/web/ic_block_black_24dp_2x.png",A="icons/ic_clear_black_24dp/web/ic_clear_black_24dp_2x.png",l="icons/ic_crop_din_black_24dp/web/ic_crop_din_black_24dp_2x.png",n=function(){function t(t,n,e){this.el=t,this.col=n,this.row=e,this.status="unclaimed",this.id="cell-"+this.row+"-"+this.col}return t.prototype.template=function(){return"        <div class='cell' id='cell-"+this.row+"-"+this.col+"' style='display: inline-block'>\n\t<img id='cell-"+this.row+"-"+this.col+"-img' src='"+l+"' />\n</div>"},t.prototype.render=function(){return $(this.el).append(this.template()),this.onClick()},t.prototype.onClick=function(){var t;return t=this,$("#cell-"+this.row+"-"+this.col+"-img").click(function(){return"unclaimed"===t.status?h.turns%2===0?(t.status="O",$("#cell-"+t.row+"-"+t.col+"-img").attr("src",y),h.turns++):(t.status="X",$("#cell-"+t.row+"-"+t.col+"-img").attr("src",A),h.turns++):console.log("claimed cell clicked")})},t}(),o=function(){function t(t,n,e){this.el=t,this.rownum=n,this.numcells=e,this.cells=[],this.id="row-"+this.rownum}return t.prototype.template=function(){return"<div id='row-"+this.rownum+"'>\n</div>"},t.prototype.render=function(){return $(this.el).append(this.template()),this.generateCells(this.numcells)},t.prototype.generateCells=function(t){var e,r,o;for(r=0,o=[];t>r;)e=new n("#row-"+this.rownum,this.rownum,r),this.cells.push(e),e.render(),o.push(r++);return o},t}(),e=function(){function t(t,n){this.el=t,this.numrows=n,this.rows=[]}return t.prototype.template=function(){return"<div id='game-grid'>\n</div>"},t.prototype.render=function(){return $(this.el).html(this.template()),this.generateRows(this.numrows)},t.prototype.generateRows=function(t){var n,e,r;for(n=0,e=[];t>n;)r=new o("#game-grid",n,t),this.rows.push(r),r.render(),e.push(n++);return e},t}(),i=function(){function t(t){this.el=t}return t.prototype.template=function(){return"<div class='w3-container'>\n\t<div class='w3-row'>\n\t\t<div class='w3-container w3-half'>\n\t\t\t<input type='image' id='choose-x' src='"+A+"' class='w3-hover-light-gray' /> <br />\n\t\t\tGo First\n\t\t</div>\n\t\t<div class='w3-container w3-half'>\n\t\t\t<input type='image' id='choose-o' src='"+y+"' class='w3-hover-light-gray' /> <br />\n\t\t\tGo Second\n\t\t</div>\n\t</div>\n</div>"},t.prototype.render=function(){return $(this.el).html(this.template()),this.chooseTurn()},t.prototype.chooseTurn=function(){var t;return t=this,$("#choose-x").click(function(){var t;return h.players.human="X",h.players.ai="O",t=new r("#leftmenu"),t.render()}),$("#choose-o").click(function(){var t;return h.players.human="O",h.players.ai="X",t=new r("#leftmenu"),t.render()})},t}(),r=function(){function t(t){this.el=t}return t.prototype.template=function(){return"<div>\n\t<input id='menu-val' type='text' placeholder='Number of Rows' class='w3-input w3-border w3-hover-light-grey'/> <br />\n\t<button id='menu-btn' class='w3-btn-block'>START</button> \n\t<br />\n\t<p>Indicate the number of rows you want the\n\tgame's grid to have, and it will create\n\ta grid that has that number of rows squared\n\tamount of cells. A minimum of 3 is required.</p>\n</div>"},t.prototype.render=function(){return $(this.el).html(this.template()),this.onStart()},t.prototype.onStart=function(){return $("#menu-btn").click(function(){return $("#menu-val").val()<3&&($("#status").html("Tic Tac Toe | A minimum of three rows are required"),console.log($("#menu-val").val())),h.main("#game",$("#menu-val").val()),$("#status").html("Tic Tac Toe |"),$("#menu-btn").off(),console.log($("#menu-val").val()+" proper")})},t}(),t=function(){function t(t){this.el=t}return t.prototype.template=function(){return"<div class='w3-container'>\n\t<div class='w3-container w3-black'>\n\t\t<h2 id='status'>Tic Tac Toe | </h2>\n\t</div>\n\t<div id='main-screen' class='w3-container w3-row'>\n\t\t<div id='leftmenu' class='w3-container w3-third' style='padding-top: 16px'>\n\t\t</div>\n\t\t<div id='game' class='w3-container w3-rest w3-center'>\n\t\t</div>\n\t</div>\n</div>"},t.prototype.render=function(){var t;return $(this.el).html(this.template()),t=new i("#leftmenu"),t.render()},t}(),s={},s.read=function(t){var n,e,r;try{return e=t.length-1,r={},r.corners={"0-0":{status:t[0][0],pos:[0,0]},"0-max":{status:t[0][e],pos:[0,e]},"max-max":{status:t[e][e],pos:[e,e]},"max-0":{status:t[e][0],pos:[e,0]}},r.points={self:T(t,h.players.ai),opponent:T(t,h.players.human)}}catch(e){return n=e,console.error(n),console.log(t)}},s.eval=function(t){var n,e,r,o,i,s,l,u,c,a,p,w;for(a=t.corners,w=n=0,i=a.length;n<i;w=++n)if(r=a[w],"unclaimed"===w.status)return w.pos;if(1===f(1,2)){for(c=t.points.self[f(0,t.points.self.length)],p=_(c),e=0,s=p.length;e<s;e++)if(u=p[e],"unclaimed"===h.state[d(u)][m(u)])return u}else for(c=t.points.opponent[f(0,t.points.opponent.length)],p=_(c),o=0,l=p.length;o<l;o++)if(u=p[o],"unclaimed"===h.state[d(u)][m(u)])return u},s.respond=function(t){var n,e,r;if(r=p(t),"X"===h.players.ai){if(h.turns%2!==0)return n=s.eval(r),e=t.rows[d(n)].cells[m(n)],e.status="X",$("#cell-"+e.row+"-"+e.col+"-img").attr("src",A),h.turns=h.turns+1}else if("O"===h.players.ai&&h.turns%2===0)return n=s.eval(r),e=t.rows[d(n)].cells[m(n)],e.status="O",$("#cell-"+e.row+"-"+e.col+"-img").attr("src",y),h.turns=h.turns+1},g=new t("#app"),g.render()}).call(this);
