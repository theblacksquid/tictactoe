(function(){var t,n,e,r,i,o,s,l,u,c,a,h,f,p,d,m,w,v,g,y,b,T,_,k,A;d=function(t){return t[0]},m=function(t){return t[1]},k=function(t,n){switch(!1){case m(t)-m(n)!==0:return"VERTICAL";case d(t)-d(n)!==0:return"HORIZONTAL";default:return(m(t)-m(n))/(d(t)-d(n))}},w=function(t,n,e){var r,i,o,s,l,u;switch(l=t.length,r=[],i=e,!1){case"HORIZONTAL"!==n:return t[e];case"VERTICAL"!==n:for(o=0,s=t.length;o<s;o++)u=t[o],r.push(u[e]);return r;case"DIAGONAL"!==n:for(;l>i;)r.push(t[i][i]),i++;return r;case"ANTI-DIAG"!==n:for(;l>i;)r.push(t[i][l-1-i]),i++;return r}},b=function(t){var n;for(n=0;t.length>n;){if(t[n]!==t[0])return!1;n++}return!0},a=function(t){return[].concat.apply([],t)},v=function(t,n){return b(t)?t.length:t.filter(function(t){if(t===n)return!0}).length},T=function(t,n){var e,r,i,o,s,l,u,c,a;for(l=[],c=0,r=0,o=t.length;r<o;r++){for(u=t[r],a=0,i=0,s=u.length;i<s;i++)e=u[i],e===n?(l.push([c,a]),a++):a++;c++}return l},p=function(t,n){return Math.floor(Math.random()*(n-t+1))+t},_=function(t){var n,e,r,i,o,s,l,u,c;for(u=d(t),c=m(t),e=[[-1,0],[-1,-1],[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1]],l=[],o=0,s=e.length;o<s;o++)n=e[o],r=d(n),i=m(n),l.push([u+r,c+i]);return l},u=function(t,n){var e,r,i,o,s,l,u,c,a;for(s=0;n.length>s;){for(o=w(n,"HORIZONTAL",s),a=w(n,"VERTICAL",s),i=w(n,"DIAGONAL",0),e=w(n,"ANTI-DIAG",0),r=[o,a,i,e],u=0,c=r.length;u<c;u++)if(l=r[u],b(l)===!0&&l[0]===t)return!0;s++}return!1},c=function(t,n,e){var r,i;return i=a(t).filter(function(t){if("unclaimed"!==t)return!0}),r=a(t).length,u(n,t)?n+" wins":u(e,t)?e+" wins":i.length===r?"DRAW":"CONTINUE"},f=function(t){var n,e,r,i,o,s,l,u,c,a;for(c=t.rows,a=[],r=0,o=c.length;r<o;r++){for(u=c[r],n=[],l=u.cells,i=0,s=l.length;i<s;i++)e=l[i],n.push(e.status);a.push(n)}return a},h={},h.state=[],h.turns=1,h.over=function(t){var n,e,r,i,o,s,l,u;for(s=t.rows,e=0,i=s.length;e<i;e++)for(u=s[e],l=u.cells,r=0,o=l.length;r<o;r++)n=l[r],$("#cell-"+n.row+"-"+n.col+"-img").off();return h.turns=1},h.players={human:"",ai:""},h.obj={},h.main=function(t,n){var r,i,l,u,a,p,d,m,w,v;for(i=new e(t,n),i.render(),h.state=f(i),l="CONTINUE",m=i.rows,u=0,p=m.length;u<p;u++)for(v=m[u],w=v.cells,a=0,d=w.length;a<d;a++)r=w[a],$("#cell-"+r.row+"-"+r.col+"-img").click(function(){var t,n;return h.state=f(i),n=c(h.state,"X","O"),"CONTINUE"!==n&&(h.over(i),$("#status").html("Tic Tac Toe | "+n),t=new o("#leftmenu"),t.render()),s.respond(i)});return h.state=f(i),s.respond(i)},y="icons/ic_block_black_24dp/web/ic_block_black_24dp_2x.png",A="icons/ic_clear_black_24dp/web/ic_clear_black_24dp_2x.png",l="icons/ic_crop_din_black_24dp/web/ic_crop_din_black_24dp_2x.png",n=function(){function t(t,n,e){this.el=t,this.col=n,this.row=e,this.status="unclaimed",this.id="cell-"+this.row+"-"+this.col}return t.prototype.template=function(){return"        <div class='cell' id='cell-"+this.row+"-"+this.col+"' style='display: inline-block'>\n\t<img id='cell-"+this.row+"-"+this.col+"-img' src='"+l+"' />\n</div>"},t.prototype.render=function(){return $(this.el).append(this.template()),this.onClick()},t.prototype.onClick=function(){var t;return t=this,$("#cell-"+this.row+"-"+this.col+"-img").click(function(){return"unclaimed"===t.status?h.turns%2===0?(t.status="O",$("#cell-"+t.row+"-"+t.col+"-img").attr("src",y),h.turns++):(t.status="X",$("#cell-"+t.row+"-"+t.col+"-img").attr("src",A),h.turns++):console.log("claimed cell clicked")})},t}(),i=function(){function t(t,n,e){this.el=t,this.rownum=n,this.numcells=e,this.cells=[],this.id="row-"+this.rownum}return t.prototype.template=function(){return"<div id='row-"+this.rownum+"'>\n</div>"},t.prototype.render=function(){return $(this.el).append(this.template()),this.generateCells(this.numcells)},t.prototype.generateCells=function(t){var e,r,i;for(r=0,i=[];t>r;)e=new n("#row-"+this.rownum,this.rownum,r),this.cells.push(e),e.render(),i.push(r++);return i},t}(),e=function(){function t(t,n){this.el=t,this.numrows=n,this.rows=[]}return t.prototype.template=function(){return"<div id='game-grid'>\n</div>"},t.prototype.render=function(){return $(this.el).html(this.template()),this.generateRows(this.numrows)},t.prototype.generateRows=function(t){var n,e,r;for(n=0,e=[];t>n;)r=new i("#game-grid",n,t),this.rows.push(r),r.render(),e.push(n++);return e},t}(),o=function(){function t(t){this.el=t}return t.prototype.template=function(){return"<div class='w3-container'>\n\t<div class='w3-row'>\n\t\t<div class='w3-container w3-half'>\n\t\t\t<input type='image' id='choose-x' src='"+A+"' class='w3-hover-light-gray' /> <br />\n\t\t\tGo First\n\t\t</div>\n\t\t<div class='w3-container w3-half'>\n\t\t\t<input type='image' id='choose-o' src='"+y+"' class='w3-hover-light-gray' /> <br />\n\t\t\tGo Second\n\t\t</div>\n\t</div>\n</div>"},t.prototype.render=function(){return $(this.el).html(this.template()),this.chooseTurn()},t.prototype.chooseTurn=function(){var t;return t=this,$("#choose-x").click(function(){var t;return h.players.human="X",h.players.ai="O",t=new r("#leftmenu"),t.render()}),$("#choose-o").click(function(){var t;return h.players.human="O",h.players.ai="X",t=new r("#leftmenu"),t.render()})},t}(),r=function(){function t(t){this.el=t}return t.prototype.template=function(){return"<div>\n\t<input id='menu-val' type='text' placeholder='Number of Rows' class='w3-input w3-border w3-hover-light-grey'/> <br />\n\t<button id='menu-btn' class='w3-btn-block'>START</button> \n\t<br />\n\t<p>Indicate the number of rows you want the\n\tgame's grid to have, and it will create\n\ta grid that has that number of rows squared\n\tamount of cells. A minimum of 3 is required.</p>\n</div>"},t.prototype.render=function(){return $(this.el).html(this.template()),this.onStart()},t.prototype.onStart=function(){return $("#menu-btn").click(function(){return $("#menu-val").val()<3&&($("#status").html("Tic Tac Toe | A minimum of three rows are required"),console.log($("#menu-val").val())),h.main("#game",$("#menu-val").val()),$("#status").html("Tic Tac Toe |"),$("#menu-btn").off(),console.log($("#menu-val").val()+" proper")})},t}(),t=function(){function t(t){this.el=t}return t.prototype.template=function(){return"<div class='w3-container'>\n\t<div class='w3-container w3-black'>\n\t\t<h2 id='status'>Tic Tac Toe | </h2>\n\t</div>\n\t<div id='main-screen' class='w3-container w3-row'>\n\t\t<div id='leftmenu' class='w3-container w3-third' style='padding-top: 16px'>\n\t\t</div>\n\t\t<div id='game' class='w3-container w3-rest w3-center'>\n\t\t</div>\n\t</div>\n</div>"},t.prototype.render=function(){var t;return $(this.el).html(this.template()),t=new o("#leftmenu"),t.render()},t}(),s={},s.read=function(t){var n,e;return n=t.length-1,e={},e.length=n,e.corners={"0-0":{status:t[0][0],pos:[0,0]},"0-max":{status:t[0][n],pos:[0,n]},"max-max":{status:t[n][n],pos:[n,n]},"max-0":{status:t[n][0],pos:[n,0]}},e.points={self:T(t,h.players.ai),opponent:T(t,h.players.human)},e},s.eval=function(t){var n,e,r,i;i=t.points.self[p(0,t.points.self.length)],n=p(1,2);for(r in t.corners)if("unclaimed"===r.status)return value.pos;return e=function(){return[p(0,t.length),p(0,t.length)]},function(){var t,r,o,s,l,u;if(void 0===i)return e();if(1===n){for(u=_(i),t=0,o=u.length;t<o&&(l=u[t],void 0!==l);t++)if("unclaimed"===h.state[d(l)][m(l)])return l}else if(2===n)for(u=_(i),r=0,s=u.length;r<s&&(l=u[r],void 0!==l);r++)if("unclaimed"===h.state[d(l)][m(l)])return l}()},s.respond=function(t){var n,e,r;if(r=f(t),"X"===h.players.ai){if(h.turns%2!==0)return n=s.eval(s.read(r)),e=t.rows[d(n)].cells[m(n)],e.status="X",$("#cell-"+e.row+"-"+e.col+"-img").attr("src",A),h.turns=h.turns+1}else if("O"===h.players.ai&&h.turns%2===0)return n=s.eval(s.read(r)),e=t.rows[d(n)].cells[m(n)],e.status="O",$("#cell-"+e.row+"-"+e.col+"-img").attr("src",y),h.turns=h.turns+1},g=new t("#app"),g.render()}).call(this);
