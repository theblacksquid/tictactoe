(function(){var t,e,n,r,o,s,i,l,c,a,u,h,p,f,d,m,g,w,v,y,b,T,_,k,A;d=function(t){return t[0]},m=function(t){return t[1]},k=function(t,e){switch(!1){case m(t)-m(e)!==0:return"VERTICAL";case d(t)-d(e)!==0:return"HORIZONTAL";default:return(m(t)-m(e))/(d(t)-d(e))}},g=function(t,e,n){var r,o,s,i,l,c;switch(l=t.length,r=[],o=n,!1){case"HORIZONTAL"!==e:return t[n];case"VERTICAL"!==e:for(s=0,i=t.length;s<i;s++)c=t[s],r.push(c[n]);return r;case"DIAGONAL"!==e:for(;l>o;)r.push(t[o][o]),o++;return r;case"ANTI-DIAG"!==e:for(;l>o;)r.push(t[o][l-1-o]),o++;return r}},b=function(t){var e;for(e=0;t.length>e;){if(t[e]!==t[0])return!1;e++}return!0},u=function(t){return[].concat.apply([],t)},w=function(t,e){return b(t)?t.length:t.filter(function(t){if(t===e)return!0}).length},T=function(t,e){var n,r,o,s,i,l,c,a,u;for(l=[],a=0,r=0,s=t.length;r<s;r++){for(c=t[r],u=0,o=0,i=c.length;o<i;o++)n=c[o],n===e?(l.push([a,u]),u++):u++;a++}return l},f=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},_=function(t){var e,n,r,o,s,i,l,c,a;for(c=d(t),a=m(t),n=[[-1,0],[-1,-1],[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1]],l=[],s=0,i=n.length;s<i;s++)e=n[s],r=d(e),o=m(e),l.push([c+r,a+o]);return l},c=function(t,e){var n,r,o,s,i,l,c,a,u;for(i=0;e.length>i;){for(s=g(e,"HORIZONTAL",i),u=g(e,"VERTICAL",i),o=g(e,"DIAGONAL",0),n=g(e,"ANTI-DIAG",0),r=[s,u,o,n],c=0,a=r.length;c<a;c++)if(l=r[c],b(l)===!0&&l[0]===t)return!0;i++}return!1},a=function(t,e,n){var r,o;return o=u(t).filter(function(t){if("unclaimed"!==t)return!0}),r=u(t).length,c(e,t)?e+" wins":c(n,t)?n+" wins":o.length===r?"DRAW":"CONTINUE"},p=function(t){var e,n,r,o,s,i,l,c,a,u;for(a=t.rows,u=[],r=0,s=a.length;r<s;r++){for(c=a[r],e=[],l=c.cells,o=0,i=l.length;o<i;o++)n=l[o],e.push(n.status);u.push(e)}return u},h={},h.state=[],h.turns=1,h.over=function(t){var e,n,r,o,s,i,l,c;for(i=t.rows,n=0,o=i.length;n<o;n++)for(c=i[n],l=c.cells,r=0,s=l.length;r<s;r++)e=l[r],$("#cell-"+e.row+"-"+e.col+"-img").off();return h.turns=1},h.players={human:"",ai:""},h.obj={},h.main=function(t,e){var r,o,l,c,u,f,d,m,g,w;for(o=new n(t,e),o.render(),h.state=p(o),l="CONTINUE",m=o.rows,c=0,f=m.length;c<f;c++)for(w=m[c],g=w.cells,u=0,d=g.length;u<d;u++)r=g[u],$("#cell-"+r.row+"-"+r.col+"-img").click(function(){var t,e;if(h.state=p(o),i.respond(o),e=a(h.state,"X","O"),"CONTINUE"!==e)return h.over(o),$("#status").html("Tic Tac Toe | "+e),t=new s("#leftmenu"),t.render()});return h.state=p(o),i.respond(o)},y="icons/ic_block_black_24dp/web/ic_block_black_24dp_2x.png",A="icons/ic_clear_black_24dp/web/ic_clear_black_24dp_2x.png",l="icons/ic_crop_din_black_24dp/web/ic_crop_din_black_24dp_2x.png",e=function(){function t(t,e,n){this.el=t,this.col=e,this.row=n,this.status="unclaimed",this.id="cell-"+this.row+"-"+this.col}return t.prototype.template=function(){return"        <div class='cell' id='cell-"+this.row+"-"+this.col+"' style='display: inline-block'>\n\t<img id='cell-"+this.row+"-"+this.col+"-img' src='"+l+"' />\n</div>"},t.prototype.render=function(){return $(this.el).append(this.template()),this.onClick()},t.prototype.onClick=function(){var t;return t=this,$("#cell-"+this.row+"-"+this.col+"-img").click(function(){return"unclaimed"===t.status?h.turns%2===0?(t.status="O",$("#cell-"+t.row+"-"+t.col+"-img").attr("src",y),h.turns++):(t.status="X",$("#cell-"+t.row+"-"+t.col+"-img").attr("src",A),h.turns++):console.log("claimed cell clicked")})},t}(),o=function(){function t(t,e,n){this.el=t,this.rownum=e,this.numcells=n,this.cells=[],this.id="row-"+this.rownum}return t.prototype.template=function(){return"<div id='row-"+this.rownum+"'>\n</div>"},t.prototype.render=function(){return $(this.el).append(this.template()),this.generateCells(this.numcells)},t.prototype.generateCells=function(t){var n,r,o;for(r=0,o=[];t>r;)n=new e("#row-"+this.rownum,this.rownum,r),this.cells.push(n),n.render(),o.push(r++);return o},t}(),n=function(){function t(t,e){this.el=t,this.numrows=e,this.rows=[]}return t.prototype.template=function(){return"<div id='game-grid'>\n</div>"},t.prototype.render=function(){return $(this.el).html(this.template()),this.generateRows(this.numrows)},t.prototype.generateRows=function(t){var e,n,r;for(e=0,n=[];t>e;)r=new o("#game-grid",e,t),this.rows.push(r),r.render(),n.push(e++);return n},t}(),s=function(){function t(t){this.el=t}return t.prototype.template=function(){return"<div class='w3-container'>\n\t<div class='w3-row'>\n\t\t<div class='w3-container w3-half'>\n\t\t\t<input type='image' id='choose-x' src='"+A+"' class='w3-hover-light-gray' /> <br />\n\t\t\tGo First\n\t\t</div>\n\t\t<div class='w3-container w3-half'>\n\t\t\t<input type='image' id='choose-o' src='"+y+"' class='w3-hover-light-gray' /> <br />\n\t\t\tGo Second\n\t\t</div>\n\t</div>\n</div>"},t.prototype.render=function(){return $(this.el).html(this.template()),this.chooseTurn()},t.prototype.chooseTurn=function(){var t;return t=this,$("#choose-x").click(function(){var t;return h.players.human="X",h.players.ai="O",t=new r("#leftmenu"),t.render()}),$("#choose-o").click(function(){var t;return h.players.human="O",h.players.ai="X",t=new r("#leftmenu"),t.render()})},t}(),r=function(){function t(t){this.el=t}return t.prototype.template=function(){return"<div>\n\t<input id='menu-val' type='text' placeholder='Number of Rows' class='w3-input w3-border w3-hover-light-grey'/> <br />\n\t<button id='menu-btn' class='w3-btn-block'>START</button> \n\t<br />\n\t<p>Indicate the number of rows you want the\n\tgame's grid to have, and it will create\n\ta grid that has that number of rows squared\n\tamount of cells. A minimum of 3 is required.</p>\n</div>"},t.prototype.render=function(){return $(this.el).html(this.template()),this.onStart()},t.prototype.onStart=function(){return $("#menu-btn").click(function(){return $("#menu-val").val()<3&&($("#status").html("Tic Tac Toe | A minimum of three rows are required"),console.log($("#menu-val").val())),h.main("#game",$("#menu-val").val()),$("#status").html("Tic Tac Toe |"),$("#menu-btn").off(),console.log($("#menu-val").val()+" proper")})},t}(),t=function(){function t(t){this.el=t}return t.prototype.template=function(){return"<div class='w3-container'>\n\t<div class='w3-container w3-black'>\n\t\t<h2 id='status'>Tic Tac Toe | </h2>\n\t</div>\n\t<div id='main-screen' class='w3-container w3-row'>\n\t\t<div id='leftmenu' class='w3-container w3-third' style='padding-top: 16px'>\n\t\t</div>\n\t\t<div id='game' class='w3-container w3-rest w3-center'>\n\t\t</div>\n\t</div>\n</div>"},t.prototype.render=function(){var t;return $(this.el).html(this.template()),t=new s("#leftmenu"),t.render()},t}(),i={},i.read=function(t){var e,n;try{return e=t.length-1,n={},n.corners={"0-0":{status:t[0][0],pos:[0,0]},"0-max":{status:t[0][e],pos:[0,e]},"max-max":{status:t[e][e],pos:[e,e]},"max-0":{status:t[e][0],pos:[e,0]}},n.points={self:T(t,h.players.ai),opponent:T(t,h.players.human)}}catch(t){}},i.eval=function(t){var e,n,r,o,s,i,l,c,a,u,p,g;for(p=t.corners,c=n=0,s=p.length;n<s;c=++n)if(e=p[c],"unclaimed"===c.status)return c.pos;if(1===f(1,2)){for(u=t.points.self[f(0,t.points.self.length)],g=_(u),r=0,i=g.length;r<i;r++)if(a=g[r],"unclaimed"===h.state[d(a)][m(a)])return a}else for(u=t.points.opponent[f(0,t.points.opponent.length)],g=_(u),o=0,l=g.length;o<l;o++)if(a=g[o],"unclaimed"===h.state[d(a)][m(a)])return a},i.respond=function(t){var e,n,r;if("X"===h.players.ai){if(h.turns%2!==0)try{return e=i.eval(i.read(p(t))),n=t.rows[d(e)].cells[m(e)],n.status="X",$("#cell-"+n.row+"-"+n.col+"-img").attr("src",A),h.turns=h.turns+1}catch(n){return r=n,console.log("grd: "),console.log(t),console.log("getCurrentState: "),console.log(p(t)),console.log("game.state: "),console.log(h.state),console.log("ai.read(game.state): "),console.log(i.read(h.state)),console.log("choose: "),console.log(e),console.error(r)}}else if("O"===h.players.ai&&h.turns%2===0)try{return e=i.eval(i.read(p(t))),n=t.rows[d(e)].cells[m(e)],n.status="O",$("#cell-"+n.row+"-"+n.col+"-img").attr("src",y),h.turns=h.turns+1}catch(n){return r=n,console.log("grd: "),console.log(t),console.log("getCurrentState: "),console.log(p(t)),console.log("game.state: "),console.log(h.state),console.log("ai.read(game.state): "),console.log(i.read(h.state)),console.log("choose: "),console.log(e),console.error(r)}},v=new t("#app"),v.render()}).call(this);
